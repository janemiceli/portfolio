---
import Layout from '../layouts/Layout.astro';
import Terminal from '../components/Terminal.jsx';
import ContactModal from '../components/ContactModal.tsx';
---

<Layout title="Akash Verma | SRE & Cloud Architect">
	<div class="flex flex-col gap-12">
		<!-- Production Mode Overlay -->
		<div id="prod-overlay" class="fixed inset-0 bg-red-900/40 pointer-events-none z-[100] hidden opacity-0 transition-opacity duration-300 flex items-center justify-center">
			<div class="bg-red-950/90 border-2 border-red-500 p-8 rounded-xl shadow-2xl text-center transform scale-110 animate-pulse">
				<h2 class="text-5xl font-bold text-red-500 mb-4 tracking-widest">⚠️ SEV-1 INCIDENT ⚠️</h2>
				<p class="text-xl text-red-200 font-mono">PRODUCTION DATABASE DROPPED</p>
				<p class="text-sm text-red-400 mt-4">(Just kidding. But you felt that panic, didn't you?)</p>
				<button id="resolve-incident-btn" class="mt-8 px-6 py-2 bg-red-600 hover:bg-red-500 text-white rounded font-bold pointer-events-auto">
					Rollback & Resolve
				</button>
			</div>
		</div>

		<!-- Hero Section -->
		<section class="flex flex-col md:flex-row gap-8 items-center justify-between py-12 relative">
			<div class="flex-1 space-y-6">
				<h1 class="text-5xl md:text-6xl font-bold tracking-tight text-slate-900 dark:text-slate-100 transition-colors">
					Hi, I'm <span class="text-emerald-600 dark:text-emerald-400">Akash Verma</span>
				</h1>
				<h2 id="role-title" class="text-2xl md:text-3xl text-slate-600 dark:text-slate-400 font-medium cursor-pointer hover:text-emerald-600 dark:hover:text-emerald-300 transition-colors select-none group relative" title="Click for the real title">
					<span class="role-text">DevOps & SRE <span class="text-emerald-500">/</span> Data & AI <span class="text-emerald-500">|</span> Cloud Architect</span>
					<span class="absolute -top-6 left-0 text-xs bg-slate-200 dark:bg-slate-800 text-emerald-600 dark:text-emerald-400 px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity border border-slate-300 dark:border-slate-700">Click for honest titles</span>
				</h2>
				<p class="text-lg text-slate-600 dark:text-slate-400 max-w-2xl leading-relaxed text-justify transition-colors">
					Bridging the gap between infrastructure, data, and machine learning. I architect scalable cloud platforms, automate resilient DevOps pipelines, and optimize high performance computing systems for next generation AI workloads.
				</p>
				<div class="flex flex-wrap gap-4 pt-4">
					<a href="/portfolio/experience" class="px-6 py-3 bg-emerald-500 hover:bg-emerald-400 text-white dark:text-slate-950 font-semibold rounded-lg transition-colors shadow-lg shadow-emerald-500/20">
						View Experience
					</a>
					<ContactModal client:load />
					<button id="prod-mode-btn" class="px-6 py-3 border border-red-500/30 text-red-500 dark:text-red-400 hover:bg-red-500/10 hover:border-red-500 font-semibold rounded-lg transition-all flex items-center gap-2 group">
						<span class="group-hover:animate-bounce">⚠️</span> Deploy to Prod
					</button>
				</div>
			</div>
			
			<!-- Interactive Terminal -->
			<div class="flex-1 w-full max-w-xl rounded-xl overflow-hidden border border-slate-200 dark:border-slate-700 shadow-2xl shadow-emerald-500/10 dark:shadow-emerald-900/20 bg-[#1e1e1e] transition-colors">
				<div class="flex items-center px-4 py-2 bg-slate-100 dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 transition-colors">
					<div class="flex gap-2">
						<div class="w-3 h-3 rounded-full bg-red-500"></div>
						<div class="w-3 h-3 rounded-full bg-yellow-500"></div>
						<div class="w-3 h-3 rounded-full bg-green-500"></div>
					</div>
					<div class="mx-auto text-xs text-slate-500 dark:text-slate-400 font-mono">guest@akash-portfolio:~</div>
				</div>
				<div class="h-[350px] w-full p-2 bg-[#1e1e1e]">
					<Terminal client:only="react" />
				</div>
			</div>
		</section>

		<!-- Quick Stats -->
		<section class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 py-8 border-y border-slate-200 dark:border-slate-800 transition-colors">
			<!-- Note: On mobile, we use 'active' state to show the popup on tap -->
			<div class="p-4 flex flex-col gap-2 relative group cursor-help transition-all hover:bg-slate-50 dark:hover:bg-slate-900/50 rounded-lg" tabindex="0">
				<span class="text-3xl font-bold text-emerald-600 dark:text-emerald-400 transition-colors">10+</span>
				<span class="text-sm text-slate-500 dark:text-slate-400 font-mono uppercase tracking-wider transition-colors">Years Experience</span>
				<!-- Hover Pop-up: "This is fine" meme -->
				<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-4 w-48 opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity duration-300 pointer-events-none z-50">
					<div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-2 shadow-xl transition-colors">
						<img src="https://media.giphy.com/media/NTur7XlVDUdqM/giphy.gif" alt="This is fine" class="w-full rounded" />
						<p class="text-xs text-center mt-2 text-slate-600 dark:text-slate-300 font-mono">Me in production, 10 years ago.</p>
					</div>
					<!-- Arrow -->
					<div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-white dark:border-t-slate-800 transition-colors"></div>
				</div>
			</div>
			
			<div class="p-4 flex flex-col gap-2 relative group cursor-help transition-all hover:bg-slate-50 dark:hover:bg-slate-900/50 rounded-lg" tabindex="0">
				<span class="text-3xl font-bold text-emerald-600 dark:text-emerald-400 transition-colors">3</span>
				<span class="text-sm text-slate-500 dark:text-slate-400 font-mono uppercase tracking-wider transition-colors">Cloud Platforms</span>
				<!-- Hover Pop-up: Cloud Wars -->
				<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-4 w-64 opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity duration-300 pointer-events-none z-50">
					<div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-2 shadow-xl transition-colors">
						<img src="https://media.giphy.com/media/26tn33aiUhaTTb81W/giphy.gif" alt="Cloud Battle" class="w-full rounded" />
						<div class="mt-2 text-center">
							<span class="text-xs font-bold text-orange-500 dark:text-orange-400">AWS</span>
							<span class="text-xs text-slate-500 mx-1">vs</span>
							<span class="text-xs font-bold text-blue-500 dark:text-blue-400">Azure</span>
							<span class="text-xs text-slate-500 mx-1">vs</span>
							<span class="text-xs font-bold text-yellow-500 dark:text-yellow-400">GCP</span>
						</div>
					</div>
					<!-- Arrow -->
					<div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-white dark:border-t-slate-800 transition-colors"></div>
				</div>
			</div>

			<div class="p-4 flex flex-col gap-2 relative group cursor-help transition-all hover:bg-slate-50 dark:hover:bg-slate-900/50 rounded-lg" tabindex="0">
				<span class="text-3xl font-bold text-emerald-600 dark:text-emerald-400 transition-colors">500+</span>
				<span class="text-sm text-slate-500 dark:text-slate-400 font-mono uppercase tracking-wider transition-colors">Compute Managed</span>
				<!-- Hover Pop-up: Powered by Hamsters -->
				<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-4 w-48 opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity duration-300 pointer-events-none z-50">
					<div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-2 shadow-xl transition-colors">
						<img src="https://media.giphy.com/media/uVOTxMagGsgXS/giphy.gif" alt="Hamster Wheel" class="w-full rounded" />
						<p class="text-xs text-center mt-2 text-slate-600 dark:text-slate-300 font-mono">Running on full capacity!</p>
					</div>
					<!-- Arrow -->
					<div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-white dark:border-t-slate-800 transition-colors"></div>
				</div>
			</div>

			<div class="p-4 flex flex-col gap-2 relative group cursor-help transition-all hover:bg-slate-50 dark:hover:bg-slate-900/50 rounded-lg" tabindex="0">
				<span class="text-3xl font-bold text-emerald-600 dark:text-emerald-400 transition-colors">100+</span>
				<span class="text-sm text-slate-500 dark:text-slate-400 font-mono uppercase tracking-wider transition-colors">Microservices</span>
				<!-- Hover Pop-up: Whack-a-Mole -->
				<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-4 w-48 opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity duration-300 pointer-events-none z-50">
					<div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-2 shadow-xl transition-colors">
						<img src="https://media.giphy.com/media/13HgwGsXF0aiGY/giphy.gif" alt="Debugging" class="w-full rounded" />
						<p class="text-xs text-center mt-2 text-slate-600 dark:text-slate-300 font-mono">Fix one bug, spawn two more.</p>
					</div>
					<!-- Arrow -->
					<div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-white dark:border-t-slate-800 transition-colors"></div>
				</div>
			</div>

			<div class="p-4 flex flex-col gap-2 relative group cursor-help transition-all hover:bg-slate-50 dark:hover:bg-slate-900/50 rounded-lg" tabindex="0">
				<span class="text-3xl font-bold text-emerald-600 dark:text-emerald-400 transition-colors">99.99%</span>
				<span class="text-sm text-slate-500 dark:text-slate-400 font-mono uppercase tracking-wider transition-colors">Target Uptime</span>
				<!-- Hover Pop-up: Sweating SRE -->
				<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-4 w-48 opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity duration-300 pointer-events-none z-50">
					<div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-2 shadow-xl transition-colors">
						<img src="https://media.giphy.com/media/LRVnPYqM8DLag/giphy.gif" alt="Sweating" class="w-full rounded" />
						<p class="text-xs text-center mt-2 text-slate-600 dark:text-slate-300 font-mono">0.01% Error Budget remaining...</p>
					</div>
					<!-- Arrow -->
					<div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-white dark:border-t-slate-800 transition-colors"></div>
				</div>
			</div>
			
			<div class="p-4 flex flex-col gap-2 relative group cursor-help transition-all hover:bg-slate-50 dark:hover:bg-slate-900/50 rounded-lg" tabindex="0">
				<span class="text-3xl font-bold text-emerald-600 dark:text-emerald-400 transition-colors">∞</span>
				<span class="text-sm text-slate-500 dark:text-slate-400 font-mono uppercase tracking-wider transition-colors">Automated Tasks</span>
				<!-- Hover Pop-up: Robot Uprising -->
				<div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-4 w-48 opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity duration-300 pointer-events-none z-50">
					<div class="bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg p-2 shadow-xl transition-colors">
						<img src="https://media.giphy.com/media/urvsFBDfR6N32/giphy.gif" alt="Robot" class="w-full rounded" />
						<p class="text-xs text-center mt-2 text-slate-600 dark:text-slate-300 font-mono">Destroying manual toil.</p>
					</div>
					<!-- Arrow -->
					<div class="absolute top-full left-1/2 -translate-x-1/2 border-8 border-transparent border-t-white dark:border-t-slate-800 transition-colors"></div>
				</div>
			</div>
		</section>

		<!-- Call to Action -->
		<section class="py-16 text-center">
			<h2 class="text-3xl font-bold text-slate-900 dark:text-slate-100 mb-6 transition-colors">Ready to Scale?</h2>
			<p class="text-lg text-slate-600 dark:text-slate-400 mb-8 max-w-2xl mx-auto transition-colors">
				Whether it's optimizing Kubernetes clusters, building ML pipelines, or automating your entire infrastructure, let's build something resilient together.
			</p>
			<a href="mailto:averma7304@gmail.com" class="inline-block px-8 py-4 bg-emerald-500 hover:bg-emerald-400 text-white dark:text-slate-950 font-bold rounded-lg transition-all transform hover:scale-105 shadow-lg shadow-emerald-500/20">
				Let's Talk
			</a>
		</section>
	</div>
</Layout>

<script>
	// Typewriter Title Roulette Logic
	const titles = [
		"DevOps & SRE / Data & AI | Cloud Architect", // Default
		"YAML Wrangler & Kubernetes Whisperer",
		"LLM Fine-Tuner & Prompt Engineer",        // AI Tech
		"Cloud Janitor & Infrastructure Mechanic",
		"Production Firefighter & Chaos Engineer",
		"RAG Pipeline Plumber",                    // AI Tech
		"Identifying as Root"
	];
	
	const roleTitle = document.getElementById('role-title');
	const roleText = roleTitle?.querySelector('.role-text');
	let titleIndex = 0;
	let resetTimer; // Timer for auto-reset
	
	if (roleTitle && roleText) {
		roleTitle.addEventListener('click', () => {
			// Clear existing timer on click
			if (resetTimer) clearTimeout(resetTimer);

			titleIndex = (titleIndex + 1) % titles.length;
			
			// Add a simple fade animation
			roleText.style.opacity = '0';
			setTimeout(() => {
				roleText.textContent = titles[titleIndex];
				roleText.style.opacity = '1';
			}, 200);

			// If not the default title, set a timer to revert back
			if (titleIndex !== 0) {
				resetTimer = setTimeout(() => {
					titleIndex = 0;
					roleText.style.opacity = '0';
					setTimeout(() => {
						roleText.textContent = titles[0];
						roleText.style.opacity = '1';
					}, 200);
				}, 10000); // 10 seconds
			}
		});
	}

	// Production Mode Logic
	const prodBtn = document.getElementById('prod-mode-btn');
	const resolveBtn = document.getElementById('resolve-incident-btn');
	const overlay = document.getElementById('prod-overlay');

	if (prodBtn && overlay && resolveBtn) {
		prodBtn.addEventListener('click', () => {
			overlay.classList.remove('hidden');
			// Force reflow
			void overlay.offsetWidth;
			overlay.classList.remove('opacity-0');
			
			// Optional: Shake the screen
			document.body.classList.add('animate-shake');
		});

		resolveBtn.addEventListener('click', () => {
			overlay.classList.add('opacity-0');
			setTimeout(() => {
				overlay.classList.add('hidden');
				document.body.classList.remove('animate-shake');
			}, 300);
		});
	}
</script>

<style>
	@keyframes shake {
		0%, 100% { transform: translateX(0); }
		10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
		20%, 40%, 60%, 80% { transform: translateX(5px); }
	}
	.animate-shake {
		animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
	}
</style>

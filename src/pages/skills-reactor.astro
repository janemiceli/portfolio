---
import Layout from '../layouts/Layout.astro';
import { Database, Server, Cloud, Brain, Globe, Shield, Code, Terminal, Cpu, Network } from 'lucide-react';

const core = {
  title: "Cloud Architect",
  icon: Cloud,
  color: "text-blue-500",
  tools: [
    { name: "AWS", icon: "devicon-amazonwebservices-plain-wordmark" },
    { name: "Azure", icon: "devicon-azure-plain" },
    { name: "GCP", icon: "devicon-googlecloud-plain" },
    { name: "Terraform", icon: "devicon-terraform-plain" },
    { name: "Networking", icon: Network }, // Lucide fallback
    { name: "Security", icon: Shield },   // Lucide fallback
  ]
};

const innerRing = {
  title: "SRE & DevOps",
  color: "border-violet-500",
  tools: [
    { name: "Kubernetes", icon: "devicon-kubernetes-plain" },
    { name: "Docker", icon: "devicon-docker-plain" },
    { name: "Helm", icon: "https://cdn.simpleicons.org/helm/0F1689" },
    { name: "ArgoCD", icon: "devicon-argocd-plain" },
    { name: "Jenkins", icon: "devicon-jenkins-plain" },
    { name: "Prometheus", icon: "devicon-prometheus-original" },
    { name: "Grafana", icon: "https://www.vectorlogo.zone/logos/grafana/grafana-icon.svg" },
    { name: "Ansible", icon: "devicon-ansible-plain" },
  ]
};

const outerRing = {
  title: "Data & AI",
  color: "border-amber-500",
  tools: [
    { name: "Python", icon: "devicon-python-plain" },
    { name: "Vertex AI", icon: "https://www.vectorlogo.zone/logos/google_cloud/google_cloud-icon.svg" }, // Fallback to GCP logo if specific vertex missing
    { name: "Azure OpenAI", icon: "https://www.vectorlogo.zone/logos/microsoft_azure/microsoft_azure-icon.svg" }, // Fallback to Azure logo
    { name: "BigQuery", icon: "https://www.vectorlogo.zone/logos/google_bigquery/google_bigquery-icon.svg" },
    { name: "TensorFlow", icon: "devicon-tensorflow-original" },
    { name: "PyTorch", icon: "devicon-pytorch-original" },
    { name: "LangChain", icon: "ðŸ”—" }, // Emoji as safe fallback or custom SVG
    { name: "PostgreSQL", icon: "devicon-postgresql-plain" },
    { name: "MongoDB", icon: "devicon-mongodb-plain" },
  ]
};

---

<Layout title="Skills (Reactor) | Akash Verma">
    <div class="min-h-screen bg-slate-950 flex flex-col items-center justify-center overflow-hidden relative">
        
        {/* Background Grid */}
        <div class="absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:40px_40px] [mask-image:radial-gradient(ellipse_60%_50%_at_50%_50%,#000_70%,transparent_100%)]"></div>

        {/* Text Header */}
        <div class="absolute top-10 left-0 right-0 text-center z-20 pointer-events-none">
            <h1 class="text-4xl md:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-violet-400 to-amber-400 tracking-tight">
                Architectural Core
            </h1>
            <p class="text-slate-400 mt-4 text-lg">
                DevOps Engine &bull; Intelligent Data &bull; Cloud Foundation
            </p>
        </div>

        {/* 3D Scene Container */}
        <div class="relative w-full h-[600px] flex items-center justify-center perspective-container mt-20">

             {/* 1. THE CORE (Cloud Architect) */}
             <div class="absolute z-30 flex flex-col items-center justify-center animate-float">
                <div class="w-32 h-32 rounded-full bg-slate-900 border-2 border-blue-500 shadow-[0_0_50px_rgba(59,130,246,0.5)] flex items-center justify-center z-10 relative">
                     <div class="absolute inset-0 rounded-full bg-blue-500/20 blur-xl"></div>
                     <core.icon className="w-16 h-16 text-blue-400 relative z-20" />
                </div>
                <div class="mt-6 flex flex-col gap-2 items-center">
                    {core.tools.slice(0, 3).map(tool => (
                        <div class="px-3 py-1 rounded-full bg-slate-900/90 border border-blue-500/30 text-xs text-blue-200 shadow-lg flex items-center gap-2 backdrop-blur-md">
                             {tool.icon.startsWith('http') ? (
                                <img src={tool.icon} alt={tool.name} class="w-4 h-4 object-contain" />
                            ) : (
                                <i class={`${tool.icon} text-sm`}></i> 
                            )}
                            {tool.name}
                        </div>
                    ))}
                </div>
             </div>

             {/* 2. INNER RING (DevOps/SRE) */}
             <div class="absolute w-[400px] h-[400px] border border-dashed border-violet-500/30 rounded-full animate-orbit-slow preserve-3d">
                 {innerRing.tools.map((tool, index) => {
                     const angle = (index / innerRing.tools.length) * 360;
                     return (
                         <div 
                            class="absolute top-1/2 left-1/2 w-12 h-12 -ml-6 -mt-6 bg-slate-900 border border-violet-500 rounded-full shadow-[0_0_15px_rgba(139,92,246,0.5)] flex items-center justify-center hover:scale-125 transition-transform cursor-pointer group"
                            style={`transform: rotate(${angle}deg) translate(200px) rotate(-${angle}deg)`}
                         >
                             {/* Icon */}
                             {tool.icon.startsWith('http') ? (
                                <img src={tool.icon} alt={tool.name} class="w-7 h-7 object-contain" />
                            ) : (
                                <i class={`${tool.icon} text-xl text-violet-200`}></i>
                            )}
                            
                            {/* Tooltip */}
                            <div class="absolute -bottom-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-violet-900/90 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50">
                                {tool.name}
                            </div>
                         </div>
                     );
                 })}
             </div>

             {/* 3. OUTER RING (Data & AI) */}
             <div class="absolute w-[650px] h-[650px] border border-dashed border-amber-500/30 rounded-full animate-orbit-reverse-slow preserve-3d">
                  {outerRing.tools.map((tool, index) => {
                     const angle = (index / outerRing.tools.length) * 360;
                     return (
                         <div 
                            class="absolute top-1/2 left-1/2 w-14 h-14 -ml-7 -mt-7 bg-slate-900 border border-amber-500 rounded-full shadow-[0_0_15px_rgba(245,158,11,0.5)] flex items-center justify-center hover:scale-125 transition-transform cursor-pointer group"
                            style={`transform: rotate(${angle}deg) translate(325px) rotate(-${angle}deg)`}
                         >
                            {tool.icon.startsWith('http') ? (
                                <img src={tool.icon} alt={tool.name} class="w-8 h-8 object-contain" />
                            ) : (
                                tool.icon === 'ðŸ”—' ? <span class="text-xl">ðŸ”—</span> :
                                <i class={`${tool.icon} text-2xl text-amber-200`}></i>
                            )}
                            
                            {/* Tooltip */}
                            <div class="absolute -bottom-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-amber-900/90 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none z-50">
                                {tool.name}
                            </div>
                         </div>
                     );
                 })}
             </div>

        </div>

    </div>

    <style>
        .perspective-container {
            perspective: 1200px;
            transform-style: preserve-3d;
            transform: rotateX(50deg) scale(0.9); /* Tilt the whole plane */
        }

        .preserve-3d {
            transform-style: preserve-3d;
        }

        /* 
           Key improvement: The container spins, but the children explicitly counter-rotate 
           Look at the math: We don't animate the container's rotation in CSS keyframes because 
           it makes counter-rotating children inside hard to sync.
           Instead, we keep container static and just use the loop to position them.
           Wait, to animate, we usually spin the container. 
           If we spin the container, the children spin with it.
           To keep children upright, we need a counter-animation on the children?
           Easier approach for reliable rendering: 
           Animate the rotation of the RING (planar), but keep children facing Z-up?
           CSS 3D is tricky. 
           
           Let's try a different approach: 2D orbit with 3D tilt on parent.
           If parent is tilted rotateX(60deg), the child needs rotateX(-60deg) to face camera.
        */
        
        @keyframes orbit {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes orbit-reverse {
            from { transform: rotate(360deg); }
            to { transform: rotate(0deg); }
        }
        
        .animate-orbit-slow {
             animation: orbit 40s linear infinite;
        }
        .animate-orbit-reverse-slow {
             animation: orbit-reverse 50s linear infinite;
        }

        /* 
           The icons inside need to counter the orbit AND the tilt. 
           Actually, if we put the animation on the ring:
           Ring rotates 0->360.
           Child needs to rotate -360->0 to stay upright relative to screen?
           
           Simpler Fix: Remove the tilt for a moment to see if items are okay.
           Or use a simpler 2D "Solar System" view that looks clean, then add tilt.
           
           I will use a trick: 
           The ring spins. The items are children of the ring.
           To keep items upright, they need `animation: counter-spin ...`
        */
        
        .animate-orbit-slow > div {
            animation: counter-orbit 40s linear infinite;
        }
        .animate-orbit-reverse-slow > div {
            animation: counter-orbit-reverse 50s linear infinite;
        }

        @keyframes counter-orbit {
            from { transform: rotate(0deg) rotateX(-50deg); } 
            to { transform: rotate(-360deg) rotateX(-50deg); }
        }
        
        /* Wait, the translate is baked into the style tag in the loop. 
           We can't easily animate the counter-rotation in CSS if the position is static.
        */
    </style>
    
    {/* 
        Refined Logic for Rendering:
        We will animate the ROTATION via style prop updates or just use CSS animation on the container
        and a counter-animation on the children.
        BUT the children have specific translate offsets.
        
        Let's try a robust CSS-only approach:
        Container: rotates.
        Child: rotates opposite.
        The Translate keeps it at distance.
    */}
    <style>
        /* Override previous styles */
        .perspective-container {
             perspective: 1000px;
             transform: rotateX(40deg); /* Reduced tilt for better visibility */
        }
        
        .animate-orbit-slow {
            animation: spin 30s linear infinite;
        }
        .animate-orbit-reverse-slow {
            animation: spin-reverse 40s linear infinite;
        }
        
        @keyframes spin {
             from { transform: rotate(0deg); }
             to { transform: rotate(360deg); }
        }
        @keyframes spin-reverse {
             from { transform: rotate(360deg); }
             to { transform: rotate(0deg); }
        }

        /* 
           We need to target the icons inside the rings to keep them facing the user.
           They are rotated by 'angle' initially.
           They are inside a spinning container.
           They are inside a tilted container.
           
           This is getting complex to do purely with CSS without weird glitches.
           The "weird" look user saw was likely the icons rotating with the ring and becoming upside down.
           
           QUICK FIX SOLUTION:
           1. Reduce the tilt (done: 40deg).
           2. Use a "Billboard" effect where icons always face camera?
           
           Alternative: Don't spin the container. 
           Spin the *visuals* or just keep it static 3D for now?
           User asked for animations.
           
           Let's try a technique where the ICON itself counter-rotates only the X axis?
           
           Let's simplify:
           No CSS animation on the ring container for rotation.
           Instead, strictly position them. 
           
           Actually, the "weird" visibility might be the BACKGROUND of the icons or size.
           The user said "Logs" (Logos) not visible properly.
           I will increase icon size and add a solid background to them.
        */
    </style>
    
    {/* Re-injecting simple styles to ensure visibility first, then worry about perfect orbit */}
    <style>
        .perspective-container {
            transform: rotateX(20deg) translateY(-50px);
            transform-style: preserve-3d;
        }
        
        /* Parent (Ring) Rotations */
        .animate-orbit-slow {
            animation: spin 30s linear infinite;
        }
        .animate-orbit-reverse-slow {
            animation: spin-reverse 40s linear infinite;
        }
        
        @keyframes spin {
             from { transform: rotate(0deg); }
             to { transform: rotate(360deg); }
        }
        @keyframes spin-reverse {
             from { transform: rotate(360deg); }
             to { transform: rotate(0deg); }
        }

        /* 
           Child (Icon) Counter-Rotations
           To keep icons upright while the parent ring spins:
           1. We need to animate the rotation of the icon itself.
           2. Since the icon already has a `transform: rotate(Ndeg) translate(...) rotate(-Ndeg)` applied inline,
              we cannot easily overwrite the transform property with a keyframe animation without losing position.
           
           SOLUTION:
           Wrap the icon content (img/i) in an inner div that handles the counter-rotation animation!
           But wait, the structure is currently: Ring -> Div(Icon+Tooltip).
           If we rotate the Div, it rotates in place (around its center).
           Yes! If the ring rotates clockwise, the icon div should rotate counter-clockwise around its own center
           to maintain "North is Up".
        */
        
        .animate-orbit-slow > div {
             animation: counter-spin 30s linear infinite;
        }
        .animate-orbit-reverse-slow > div {
             animation: counter-spin-reverse 40s linear infinite;
        }

        @keyframes counter-spin {
             from { transform: rotate(0deg); }
             to { transform: rotate(-360deg); }
        }
        @keyframes counter-spin-reverse {
             from { transform: rotate(0deg); }
             to { transform: rotate(360deg); }
        }
    </style>
</Layout>

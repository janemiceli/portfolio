---
import Layout from '../layouts/Layout.astro';
import { Terminal, Shield, ExternalLink } from 'lucide-react';
import certifications from '../data/certifications.json';

const certs = certifications;
---

<Layout title="Certifications (Terminal) | Akash Verma">
  <div class="font-mono dark:bg-slate-950 bg-slate-100 text-slate-800 dark:text-slate-300 min-h-screen p-4 md:p-12">
    
    <div class="max-w-6xl mx-auto space-y-12">
      
      {/* Header Command */}
      <div class="border-b border-slate-800 pb-4">
        <div class="flex items-center gap-2 text-emerald-500 mb-2 dark:text-emerald-500 text-emerald-700">
          <Terminal size={18} />
          <span>user@portfolio:~$</span>
          <span class="typing-effect dark:text-slate-100 text-slate-800" style="animation: typing 12s steps(40, end), blink-caret .75s step-end infinite;">fetch-credentials --format=json --verify-all</span>
        </div>
        <div class="text-xs text-slate-500">
          Fetching from centralized registry... <span class="text-emerald-500">Done (0.42s)</span>
        </div>
      </div>

      {/* JSON Output Blocks + Badge Boxes */}
      <div class="space-y-6 relative border-l-2 border-slate-800 ml-4 md:ml-8 pl-8 py-2">
        <span class="text-slate-500 block text-lg -ml-8 mb-4">{"["}</span>
        
        {certs.map((cert, index) => (
          <div class="group relative flex flex-col xl:flex-row gap-6 transition-colors mb-6 items-start">
            
            <div class="absolute -left-[41px] top-6 w-4 h-4 bg-slate-950 border-2 border-slate-800 group-hover:border-emerald-500 rounded-full transition-colors flex items-center justify-center z-10">
              <div class="w-1.5 h-1.5 bg-emerald-500 rounded-full opacity-0 group-hover:opacity-100"></div>
            </div>

            {/* Left: The Badge Box (Reused Design) */}
            <div class="w-full xl:w-[320px] flex-shrink-0 flex flex-col border border-slate-800 bg-slate-900/30 rounded-lg overflow-hidden backdrop-blur-sm shadow-xl group-hover:shadow-emerald-900/10 transition-shadow h-fit">
              <div class="bg-slate-950/50 border-b border-slate-800 p-3 px-4 flex items-center justify-between">
                <span class="text-[10px] font-mono text-emerald-400 font-bold flex items-center gap-2">
                  <Shield size={12} /> VERIFIED
                </span>
                <a href={cert.verifyUrl} target="_blank" rel="noopener noreferrer" class="text-slate-400 hover:text-white transition-colors">
                  <ExternalLink size={14} />
                </a>
              </div>
              
              <div class="p-8 flex flex-col items-center justify-center text-center">
                <div class="relative group/badge">
                  <div class="absolute inset-0 bg-emerald-500/20 blur-xl rounded-full opacity-0 group-hover:opacity-50 transition-opacity duration-500"></div>
                  <img 
                    src={cert.image} 
                    alt={cert.name} 
                    class="w-40 h-40 object-contain relative z-10 drop-shadow-xl transition-transform duration-500 group-hover/badge:scale-105"
                  />
                </div>
              </div>
            </div>
            {/* Right: JSON Details */}
            <div class="flex-1 space-y-1 min-w-[300px] flex flex-col justify-center">
              <span class="text-slate-500 block">{"  {"}</span>
              <div class="pl-4 space-y-1 text-sm md:text-base">
                <div class="flex gap-4">
                  <span class="text-purple-400 min-w-[3rem]">"id"</span>: <span class="text-yellow-300">"{cert.id}"</span>,
                </div>
                <div class="flex gap-4">
                  <span class="text-purple-400 min-w-[3rem]">"name"</span>: <span class={`group-hover:underline decoration-emerald-500/30 underline-offset-4 ${cert.color || "text-emerald-400"}`}>"{cert.name}"</span>,
                </div>
                <div class="flex gap-4">
                  <span class="text-purple-400 min-w-[3rem]">"issuer"</span>: <span class="dark:text-slate-100 text-slate-800">"{cert.provider}"</span>,
                </div>
                <div class="flex gap-4">
                  <span class="text-purple-400 min-w-[3rem]">"status"</span>: <span class="text-emerald-500 font-bold">"{cert.status}"</span>,
                </div>
                <div class="flex gap-4">
                  <span class="text-purple-400 min-w-[3rem]">"expiry"</span>: <span class="text-slate-400">"{cert.expires}"</span>
                </div>
              </div>
              <span class="text-slate-500 block">{"  }"}{index < certs.length -1 ? ',' : ''}</span>
            </div>

          </div>
        ))}
        
        <span class="text-slate-500 block text-lg -ml-8 mt-4">{"]"}</span>
      </div>

      <div class="pt-2 text-slate-500 animate-pulse">
        <span class="flex items-center gap-2 text-emerald-500">
          <Terminal size={18} />
          <span>user@portfolio:~$</span>
        </span>
        <span class="w-2 h-4 bg-slate-500 inline-block align-middle"></span>
      </div>

    </div>
  </div>
</Layout>

<style>
  .typing-effect {
    overflow: hidden;
    white-space: nowrap;
    border-right: 2px solid #10b981;
    animation: typing 12s steps(40, end), blink-caret .75s step-end infinite;
  }
  @keyframes typing {
    from { width: 0 }
    to { width: 100% }
  }
  @keyframes blink-caret {
    from, to { border-color: transparent }
    50% { border-color: #10b981; }
  }
</style>
